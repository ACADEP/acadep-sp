<header class="main-heading shadow-2dp">
  <!-- begin dashhead -->
  <div class="dashhead bg-white">
    <div class="dashhead-titles">
      <h6 class="dashhead-subtitle">
        ACADEP
      </h6>
      <h3 class="dashhead-title">Inicio</h3>
    </div>

    <div class="dashhead-toolbar">
      <div class="dashhead-toolbar-item">
        <a>App</a>
        / Inicio
      </div>
    </div>
  </div>
  <!-- END: dashhead -->
</header>
<!-- END: .main-heading -->


<!-- begin .main-content -->
<div class="main-content bg-clouds">

  <!-- begin .container-fluid -->
  <div class="container-fluid p-t-15">


    <form class="form-horizontal" (submit)="saveChanges(form)" #form="ngForm">
      <div class="row" style="height:-webkit-fill-available">

        <!-- BEGIN: tab center -->
        <div class="col-12">
          <div class="box">
            <header>
              <h3 class="text-center">Configuración</h3>
            </header>
            <div class="box-body">
              <ul class="nav nav-tabs is-center">
                <li class="active">
                  <a href="#a1" data-toggle="tab">Importación</a>
                </li>
                <li>
                  <a href="#a2" data-toggle="tab">Eventos</a>
                </li>
                <li>
                  <a href="#a3" data-toggle="tab">Evidencia</a>
                </li>
              </ul>
              <div class="tab-content">
                <div id="a1" class="tab-pane fade in active">
                  <!-- INICIO importacion TAB -->
                  <span [ngSwitch]="import">
                    <div *ngSwitchCase="'project'">
                      <br>
                      <div *ngIf="percent == '0%'">

                        <h2 class="text-center">Seleccione el archivo <small>(.csv)</small></h2>
                        <br>
                        <!-- <div class="col-md-12" style="display:inherit"> -->
                        <!-- <div class="box" style="text-align: right"> -->
                        <div class="text-center">
                          <input class="btn" type="file" (change)="onFileChange($event)" multiple="false" />
                        </div>
                        <br>
                        <div class="text-center">
                          <button type="button" (click)="import = null" class="btn btn-pill btn-default mar-btn"><i
                              class="fa fa-chevron-circle-left"></i>&nbsp;Anterior </button>
                        </div>

                      </div>


                      <div class="text-center" *ngIf="percent != '0%'">
                        <span *ngIf="percent != '100%'">
                          <h2>Importando proyecto...</h2>
                          <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                          <p>Si cierras esta ventana se detendrá la importación</p>
                        </span>
                        <span *ngIf="percent == '100%'">
                          <h2>Importacion completada</h2>
                          <br>
                        </span>
                        <div class="progress" style="margin-left:30px; margin-right:30px">
                          <div class="progress-bar" [ngClass]="{'complete': percent == '100%'}" role="progressbar"
                            [style.width]="percent" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                            {{percent}}
                          </div>
                        </div>
                        <br>
                        <div *ngIf="percent == '100%'">
                          <button type="button" (click)="import = ''; percent = '0%'"
                            class="btn btn-pill btn-default mar-btn"> OK </button>
                        </div>
                      </div>

                    </div>
                    <div *ngSwitchCase="'activity'">
                      <br>
                      <div *ngIf="percent == '0%'">
                      <h2 class="text-center">Seleccione el Proyecto</h2>
                      <span *ngIf="projects; else noprojects">
                        <div class="form-group" style="margin:35px">
                          <!-- <label id="labelproject" class="">Proyecto<span class="required">*</span></label> -->
                          <select class="form-control" id="project" name="project" [(ngModel)]="project_selected">
                            <option value="">Seleccione una proyecto</option>
                            <option *ngFor="let project of projects" value="{{project.id}}">{{project.title}}</option>
                          </select>
                        </div>
                        <div class="text-center">
                            <input class="btn" type="file" [disabled]="!importProject.project" (change)="onFileChange($event)" multiple="false" />
                          </div>
                      </span>
                      <br>
                    
                      <ng-template #noprojects>
                        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                      </ng-template>
                      <div class="text-center">
                        <button type="button" (click)="import = null" class="btn btn-pill btn-default mar-btn"><i
                            class="fa fa-chevron-circle-left"></i>&nbsp;Anterior </button>
                      </div>
                    </div>

                      <div class="text-center" *ngIf="percent != '0%'">
                        <span *ngIf="percent != '100%'">
                          <h2>Importando actividades a proyecto...</h2>
                          <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                          <p>Si cierras esta ventana se detendrá la importación</p>
                        </span>
                        <span *ngIf="percent == '100%'">
                          <h2>Importación completada</h2>
                          <br>
                        </span>
                        <div class="progress" style="margin-left:30px; margin-right:30px">
                          <div class="progress-bar" [ngClass]="{'complete': percent == '100%'}" role="progressbar"
                            [style.width]="percent" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                            {{percent}}
                          </div>
                        </div>
                        <br>
                        <div *ngIf="percent == '100%'">
                          <button type="button" (click)="import = ''; percent = '0%'; project_selected = ''"
                            class="btn btn-pill btn-default mar-btn"> OK </button>
                        </div>
                      </div>

                    </div>

                    <div *ngSwitchCase="'event'">
                      <br>
                      <div *ngIf="percent == '0%'">
                      <h2 class="text-center">Seleccione el Proyecto y Actividad</h2>
                      <span *ngIf="projects; else noprojects">
                        <div class="form-group" style="margin:35px">
                          <!-- <div class="box"> -->
                           
                            <div class="box-body collapse in">
                              <!-- <form class="form-inline"> -->
                                <div class="form-group">
                                  <label for="exampleInputName2">Proyecto</label>
                                  <select class="form-control" id="project" name="project" [(ngModel)]="importProject.project" (change)="changeProject()">
                                    <option value="">Seleccione una proyecto</option>
                                    <option *ngFor="let project of projects" value="{{project.id}}">{{project.title}}</option>
                                  </select>                                </div>
                                <div class="form-group" *ngIf="activities">
                                  <label for="exampleInputEmail2">Actividad</label>
                                  <select class="form-control" id="activity" name="activity" [(ngModel)]="importProject.activity">
                                    <option value="">Seleccione una actividad</option>
                                    <option *ngFor="let activity of activities" value="{{activity.id}}">{{activity.title}}</option>
                                  </select>                                </div>
                                <!-- <button type="submit" class="btn btn-info">Send invitation</button> -->
                              <!-- </form> -->
                            </div>
                          <!-- </div> -->
                        </div>
                        <div class="text-center">
                            <input class="btn" type="file" [disabled]="!importProject.activity || !importProject.project " (change)="onFileChange($event)" multiple="false" />
                          </div>
                      </span>
                      <br>
                    
                      <ng-template #noprojects>
                        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                      </ng-template>
                      <div class="text-center">
                        <button type="button" (click)="import = null" class="btn btn-pill btn-default mar-btn"><i
                            class="fa fa-chevron-circle-left"></i>&nbsp;Anterior </button>
                      </div>
                    </div>

                      <div class="text-center" *ngIf="percent != '0%'">
                        <span *ngIf="percent != '100%'">
                          <h2>Importando actividades a proyecto...</h2>
                          <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                          <p>Si cierras esta ventana se detendrá la importación</p>
                        </span>
                        <span *ngIf="percent == '100%'">
                          <h2>Importacion completada</h2>
                          <br>
                        </span>
                        <div class="progress" style="margin-left:30px; margin-right:30px">
                          <div class="progress-bar" [ngClass]="{'complete': percent == '100%'}" role="progressbar"
                            [style.width]="percent" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                            {{percent}}
                          </div>
                        </div>
                        <br>
                        <div *ngIf="percent == '100%'">
                          <button type="button" (click)="import = ''; percent = '0%'; importProject.project = ''; importProject.activity = ''; activities = null"
                            class="btn btn-pill btn-default mar-btn"> OK </button>
                        </div>
                      </div>
                      </div>
                     
                    <div *ngSwitchDefault>
                      <br>
                      <h2 class="text-center">¿Que desea importar?</h2>
                      <br>
                      <form class="form-inline" #form="ngForm" (submit)="Next(form)">
                        <div class="text-center">
                          <div class="radio">
                            <label class="">
                              <input class="hidden" ngModel value="project" type="radio" name="option" required>
                              <i class="fa fa-3x text-primary"></i>
                              Proyecto Completo
                            </label>
                          </div>
                          <div class="radio">
                            <label class="">
                              <input class="hidden" ngModel value="activity" type="radio" name="option" required>
                              <i class="fa fa-3x text-primary"></i>
                              Actividades de Proyecto
                            </label>
                          </div>
                          <div class="radio">
                            <label class="">
                              <input class="hidden" ngModel value="event" type="radio" name="option" required>
                              <i class="fa fa-3x text-primary"></i>
                              Eventos de una Actividad
                            </label>
                          </div>
                        </div>
                        <!-- <br> -->
                        <div class="text-center" style="margin-top:35px">
                          <button type="submit" class="btn btn-pill btn-default mar-btn btnpoint">Siguiente <i
                              class="fa fa-chevron-circle-right"></i></button>
                        </div>
                        <!-- <div class="text-center" style="margin-top:35px">
                          
                        </div> -->
                      </form>
                    </div>
                  </span>

                  <!-- FIN importacion TAB -->
                </div>
                <div id="a2" class="tab-pane fade">
                  <!-- Eventos TAB -->
                  <div class="col-xs-12">
                    <div class="box bg-white">
                      <div class="box-heading">
                        <div class="box-title">
                          <header class="box-heading bg-wet-asphalt text-white">
                            <h3>Tipos de evento</h3>
                          </header>
                        </div>
                      </div>
                      <div class="box-body">
                        <form class="form-inline" style="margin-left:15px; margin-bottom: 10px" (submit)="addType()">
                          <div class="form-group mx-sm-3 mb-2">
                            <!-- <label for="inputPassword2" class="sr-only">Nombre</label> -->
                            <input type="text" class="form-control" name="actnasme " [(ngModel)]="eventType.name"
                              placeholder="Nombre">
                          </div>
                          <button type="submit" class="btn btn-primary mb-2">Agregar</button>
                          <span class="pull-right">
                            <input name="before" [(ngModel)]="eventType.before" type="checkbox"
                              class="form-check-input">
                            <label class="form-check-label"> Antes</label>&nbsp;
                            <input name="during" [(ngModel)]="eventType.during" type="checkbox"
                              class="form-check-input">
                            <label class="form-check-label"> Durante</label>&nbsp;
                            <input name="after" [(ngModel)]="eventType.after" type="checkbox" class="form-check-input">
                            <label class="form-check-label"> Despues</label>
                          </span>
                        </form>
                        <br>
                        <ul class="list-group">
                          <li class="list-group-item" *ngFor="let act of configGlobal.event_types">{{act.name}}
                            <div class="pull-right">
                              <input [checked]="act.before" disabled name="before" type="checkbox"
                                class="form-check-input">
                              <label class="form-check-label"> Antes</label>&nbsp;
                              <input [checked]="act.during" disabled name="during" type="checkbox"
                                class="form-check-input">
                              <label class="form-check-label"> Durante</label>&nbsp;
                              <input [checked]="act.after" disabled name="after" type="checkbox"
                                class="form-check-input">
                              <label class="form-check-label"> Despues</label>
                            </div>
                          </li>
                        </ul>
                      </div>
                      <div class="col-md-12 text-center">
                        <button style="margin-bottom:20px" type="submit" class="btn btn-success">Guardar
                          cambios</button>
                      </div>
                    </div>
                  </div>
                  <!--FIN Eventos TAB -->

                </div>
                <div id="a3" class="tab-pane fade">
                  <!-- Evidencia TAB -->
                  <div class="row">
                    <div class="col-md-6">
                      <!-- BEGIN: flatpickr -->
                      <div class="row">
                        <div class="col-xs-12">
                          <div class="box bg-white">
                            <div class="box-heading">
                              <div class="box-title">
                                <header class="box-heading bg-wet-asphalt text-white">
                                  <h3>Fotos de evidencia</h3>
                                </header>
                              </div>
                            </div>
                            <div class="box-body">
                              <div class="form-group">
                                <label for="min" class="col-sm-2 control-label"
                                  [ngClass]="{'errortxt':configGlobal.min_photos > 1000 || configGlobal.min_photos < 1 || configGlobal.min_photos > configGlobal.max_photos}">Mínimo</label>
                                <div class="col-sm-10">
                                  <input type="number" class="form-control" id="min" name="min"
                                    placeholder="cantidad mínima de fotos"
                                    [ngClass]="{'error':configGlobal.min_photos > 1000 || configGlobal.min_photos < 1 || configGlobal.min_photos > configGlobal.max_photos}"
                                    [value]="configGlobal.min_photos" name="min" [(ngModel)]="configGlobal.min_photos"
                                    required minlength="1" maxlength="1000">
                                  <small class="errortxt"
                                    *ngIf="configGlobal.min_photos > 1000 || configGlobal.min_photos < 1">
                                    Ingrese un número entre 1 y 1000
                                  </small>
                                </div>
                              </div>
                              <hr class="b-s-dashed">
                              <div class="form-group">
                                <label for="max" class="col-sm-2 control-label"
                                  [ngClass]="{'errortxt':configGlobal.max_photos > 1000 || configGlobal.max_photos < 1 || configGlobal.min_photos > configGlobal.max_photos}">Máximo</label>
                                <div class="col-sm-10">
                                  <input type="number" class="form-control" id="max" name="max"
                                    placeholder="cantidad máxima de fotos"
                                    [ngClass]="{'error':configGlobal.max_photos > 1000 || configGlobal.max_photos < 1 || configGlobal.min_photos > configGlobal.max_photos}"
                                    [(ngModel)]="configGlobal.max_photos" required minlength="1" maxlength="1000">
                                  <small class="errortxt"
                                    *ngIf="configGlobal.max_photos > 1000 || configGlobal.max_photos < 1">
                                    Ingrese un número entre 1 y 1000
                                  </small>
                                </div>
                              </div>
                              <hr class="b-s-dashed">
                              <h4 class="text-center errortxt"
                                *ngIf="configGlobal.min_photos > configGlobal.max_photos"><i
                                  class="fa fa-exclamation-circle"></i> el minimo no puede ser mayor al maximo</h4>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- END: flatpickr -->
                    </div>

                    <div class="col-md-6">
                      <!-- BEGIN: flatpickr -->
                      <div class="row">

                        <div class="col-xs-12">
                          <div class="box bg-white">
                            <div class="box-heading">
                              <div class="box-title">
                                <header class="box-heading bg-wet-asphalt text-white">

                                  <h3>PDF</h3>
                                </header>
                              </div>

                            </div>
                            <div class="box-body">

                              <div class="form-group">
                                <label class="col-sm-2 control-label">Encabezado</label>
                                <div class="col-sm-10">
                                  <input type="text" class="form-control" [(ngModel)]="configPdf.text_header"
                                    name="header" [value]="configPdf.text_header">
                                </div>
                              </div>
                              <hr class="dashed">
                              <div class="form-group">
                                <label class="col-sm-2 control-label">Pie de página</label>
                                <div class="col-sm-10">
                                  <input type="text" class="form-control" [(ngModel)]="configPdf.text_footer"
                                    name="footer" [value]="configPdf.text_footer">
                                </div>
                              </div>
                              <hr class="dashed">

                              <div class="form-group">
                                <img class="img-icon" [src]="configPdf.img_header1" *ngIf="!loading" alt="">
                                <!-- <div > -->

                                <mat-spinner class="img-icon" *ngIf="loading"></mat-spinner>
                                <!-- </div> -->

                                <label for="min" class="col-sm-2 control-label">Imagen izquierda</label>
                                <div class="col-sm-10">
                                  <input type="file" class="form-control" (change)="uploadImage($event, 1)">
                                </div>
                              </div>
                              <hr class="dashed">

                              <div class="form-group">
                                <img class="img-icon" [src]="configPdf.img_header2" *ngIf="!loading2" alt="">
                                <mat-spinner class="img-icon" *ngIf="loading2"></mat-spinner>

                                <label for="min" class="col-sm-2 control-label">Imagen derecha</label>
                                <div class="col-sm-10">
                                  <input type="file" class="form-control" (change)="uploadImage($event, 2)">
                                </div>
                              </div>
                              <!-- <input class="form-control" type="file" data-plugin="flatpickr"> -->
                              <!-- <input class="form-control" data-plugin="flatpickr" data-date-format="m/d/Y" placeholder="American Format ('m/d/Y')">
                                <hr class="dashed"> -->
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- END: flatpickr -->

                    </div>
                    <div class="col-md-12 text-center">
                      <button style="margin-bottom:20px" type="submit" class="btn btn-success">Guardar cambios</button>
                    </div>
                  </div>
                  <!-- FIN Evidencia TAB -->
                </div>
              </div>
              <hr>

            </div>
          </div>
        </div>
        <!-- END: tab center -->


      </div>
    </form>

    <!-- END: modal -->

  </div>
  <!-- END: .container-fluid -->

</div>
